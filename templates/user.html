{% extends 'base.html' %}
{% block content %}

  <h1>{{ user.name }} ({{ user.user_id }})</h1>
  <p><b>Email:</b> {{ user.email }}</p>
  <p><b>Age:</b> {{ user.age }}</p>
  <p><b>Residency Address:</b> {{ user.residency_address }}</p>
  <p><b>Zipcode:</b> {{ user.zipcode }}</p>
  <p><b>Allergies:</b> {{ user.allergies }}</p>
  <p><b>Medications:</b> {{ user.medications }}</p>
  <p><b>Phone:</b> {{ user.phone }}</p>

<!------------------------------ EDIT USER FORM  ---------------------------------->
  <button type="button" class="editFormButton">Edit</button>
  <form class="edit-form user-edit-form" action="/users/{{ user.user_id }}" method="POST">
    <p><b>Name:</b></p>
    <input class="user-name" type="text" value="{{ user.name }}" name="name">
    <p><b>Email:</b></p>
    <input class="user-email" type="text" value="{{ user.email }}" name="email">
    <p><b>Age:</b></p>
    <input class="user-age" type="text" value="{{ user.age }}" name="age">
    <p><b>Residency Address:</b></p>
    <input class="user-address" type="text" value="{{ user.residency_address }}" name="residency_address">
    <p><b>Zipcode:</b></p>
    <input class="user-zipcode" type="text" value="{{ user.zipcode }}" name="zipcode">
    <p><b>Allergies:</b></p>
    <input class="user-allergies" type="text" value="{{ user.allergies }}" name="allergies">
    <p><b>Medications:</b></p>
    <input class="user-medications" type="text" value="{{ user.medications }}" name="medications">
    <p><b>Phone:</b></p>
    <input class="user-phone" type="text" value="{{ user.phone }}" name="phone">
    <input type="hidden" class="user-id" name="user-id" value="{{ user.user_id }}">
    <input type="submit" id="submit" value="Save"></input>
  </form>

<!------------------------------ SHOW CONTACTS  ---------------------------------->
  {% if user.contacts %}
  <h2>Contacts</h2>

    <ul class="user-contacts">
    {% for contact in user.contacts %}
      <a href="/contacts/{{ contact.contact_id }}"> {{ contact.name }} </a>
      {% for phone in contact.phones %}
        <li>{{ phone.type }}: {{ phone.phone }}</li>
      {% endfor %}
    {% endfor %}
    </ul>
  {% endif %}

<!------------------------------ ADD CONTACT FORM  ---------------------------------->
  <h3>Add a contact:</h3>

  <form class="contact-form" action="/contacts" method="POST">
    <div>
      <label>
        Name
        <input class="contact-name" type="text" name="name">
      </label>
    </div>

    <div>
      <label>
        Type
        <input class="phone-type" type="text" name="type">
      </label>
    </div>

    <div>
      <label>
        Phone
        <input class="contact-phone" type="text" name="phone">
      </label>
    </div>

    <div>
      <input type="submit" value="Add">
    </div><br>
  </form>


<!------------------------------ ADD EARTHQUAKE ALERT SETTING ---------------------------------->
  <h3>Earthquake Alert Settings:</h3>

<!-- TODO: Refactor model.py to store user's settings -->
  <form class="earthquake-form" action="/settings" method="POST">
    <div>
      <label>
        Magnitude
        <input class="earth-mag" type="text" name="magnitude">
      </label>
    </div>
  </form><br><br>


{% endblock %}
